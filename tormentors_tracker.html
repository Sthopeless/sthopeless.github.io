<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tormentors of Torghast Tracker</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 40px;
      background-color: #1a1a1a;
      color: #eee;
    }

    h1, h2, h3 {
      color: #ffcc00;
    }

    label, select, input, button {
      font-size: 1rem;
      margin: 8px 0;
    }

    input, select {
      padding: 6px;
    }

    button {
      padding: 8px 12px;
      background-color: #444;
      color: #fff;
      border: none;
      cursor: pointer;
      margin-top: 10px;
    }

    button:hover {
      background-color: #666;
    }

    #checkboxes {
      display: flex;
      gap: 40px;
      margin-bottom: 20px;
    }

    .column {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .boss-checkbox {
      background: #2a2a2a;
      padding: 8px;
      border-radius: 5px;
    }

    #output {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .day-box {
      background-color: #2a2a2a;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #333;
    }

    .day-box h3 {
      margin-top: 0;
      margin-bottom: 10px;
      color: #00ffff;
    }

    ul {
      padding-left: 20px;
    }

    li {
      margin: 3px 0;
    }
  </style>
</head>
<body>
  <h1>Tormentors of Torghast Spawn Planner</h1>

  <label for="startTime">Time and date of boss spawn:</label><br>
  <input type="datetime-local" id="startTime"><br>

  <label for="bossName">Which boss spawned at that time?</label><br>
  <select id="bossName"></select>

  <h2>Mark Completed Bosses</h2>
  <h3>Minions of the Cold Dark</h3>
  <div id="checkboxes">
    <div id="leftColumn" class="column"></div>
    <div id="rightColumn" class="column"></div>
  </div>

  <button onclick="calculateSpawns()">Calculate Spawns</button>

  <h2>Upcoming Spawns (Next 7 Days)</h2>
  <div id="output"></div>

  <script>
    const allBosses = [
      "Algel the Haunter", "Malleus Grakizz", "Gralebboih", "The Mass of Souls",
      "Manifestation of Pain", "Versya the Damned", "Zul'gath the Flayer", "Golmak The Monstrosity",
      "Sentinel Pyrophus", "Mugrem the Soul Devourer", "Kazj The Sentinel", "Promathiz",
      "Sentinel Shakorzeth", "Intercessor Razzra", "Gruukuuek the Elder"
    ]

    const leftBosses = [
      "Versya the Damned", "Promathiz", "Gruukuuek the Elder", "Mugrem the Soul Devourer",
      "Algel the Haunter", "Kazj the Sentinel", "Malleus Grakizz", "Golmak the Monstrosity"
    ];

    const rightBosses = [
      "Gralebboih", "Sentinel Pyrophus", "Zul'gath the Flayer", "The Mass of Souls",
      "Sentinel Shakorzeth", "Intercessor Razzra", "Manifestation of Pain"
    ];

    const bossSelect = document.getElementById("bossName");
    const leftColumn = document.getElementById("leftColumn");
    const rightColumn = document.getElementById("rightColumn");

    allBosses.forEach((boss, index) => {
      const option = document.createElement("option");
      option.value = boss;
      option.textContent = boss;
      bossSelect.appendChild(option);
    });

    function createCheckbox(boss, index) {
      const wrapper = document.createElement("div");
      wrapper.className = "boss-checkbox";

      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.id = `check-${index}`;
      checkbox.value = boss;

      const label = document.createElement("label");
      label.htmlFor = `check-${index}`;
      label.textContent = " " + boss;

      wrapper.appendChild(checkbox);
      wrapper.appendChild(label);
      return wrapper;
    }

    leftBosses.forEach((boss, i) => {
      leftColumn.appendChild(createCheckbox(boss, i));
    });

    rightBosses.forEach((boss, i) => {
      rightColumn.appendChild(createCheckbox(boss, i + leftBosses.length));
    });

    function calculateSpawns() {
      const input = document.getElementById("startTime").value;
      const selectedBoss = document.getElementById("bossName").value;
      const baseTime = new Date(input);

      if (!input || !selectedBoss) {
        alert("Please enter both a date/time and boss name.");
        return;
      }

      const selectedIndex = allBosses.indexOf(selectedBoss);
      const completed = new Set();

      allBosses.forEach((boss, index) => {
        const checkbox = document.getElementById(`check-${index}`);
        if (checkbox && checkbox.checked) {
          completed.add(boss);
        }
      });

      const output = document.getElementById("output");
      output.innerHTML = "";

      const fullRotation = [];
      for (let i = 0; i < 84; i++) {
        const boss = allBosses[(selectedIndex + i) % allBosses.length];
        const spawnTime = new Date(baseTime.getTime() + i * 2 * 60 * 60 * 1000);
        fullRotation.push({ boss, spawnTime });
      }

      // Group by day
      for (let d = 0; d < 7; d++) {
        const section = document.createElement("div");
        section.className = "day-box";

        const title = document.createElement("h3");
        const dayDate = new Date(baseTime.getTime() + d * 24 * 60 * 60 * 1000);
        title.textContent = `Day ${d + 1} – ${dayDate.toLocaleDateString(undefined, {
          weekday: "short", month: "short", day: "numeric"
        })}`;
        section.appendChild(title);

        const list = document.createElement("ul");
        for (let h = 0; h < 12; h++) {
          const index = d * 12 + h;
          const entry = fullRotation[index];
          if (!completed.has(entry.boss)) {
            const li = document.createElement("li");
            li.textContent = `${entry.spawnTime.toLocaleTimeString(undefined, {
              hour: '2-digit', minute: '2-digit'
            })} — ${entry.boss}`;
            list.appendChild(li);
          }
        }

        if (list.children.length > 0) {
          section.appendChild(list);
          output.appendChild(section);
        }
      }
    }
  </script>
</body>
</html>
